/**
 * Music Story API Pseudo-Class
 * includes CryptoJs Library
		CryptoJS v3.1.2
		code.google.com/p/crypto-js
		(c) 2009-2013 by Jeff Mott. All rights reserved.
		code.google.com/p/crypto-js/wiki/License
 */
function MusicStoryApi(e,t,n,i,s){var o=this;o.consumer_key=e;o.consumer_secret=t;o.token=n;o.token_secret=i;o._v=s;o._bu="http://api.music-story.com";o._rs=null;this._fch=function(e,t){var n=setInterval(function(){if(e()){clearInterval(n);t()}},10)};this._fru=function(e){return encodeURIComponent(e).replace("+"," ").replace("%7E","~")};this._fl=function(e,t,n){var i=document.createElement("script");var s=document.getElementsByTagName("head")[0];i.type="text/javascript";var u="";for(r in t.data){if(u)u+="&";else u="?";u+=r+"="+encodeURIComponent(t.data[r])}e=e+u;i.src=e;i.onload=function(){o._rs=json;s.removeChild(i);if(typeof n!=="undefined")n()};s.appendChild(i)};this.get=function(e,t,n,r){if(typeof n==="undefined")n=null;if(!t)return;e=e.toLowerCase();var i="getObject";o._frq(e,t,null,null,i,null,null,function(){o._fcr(e,i,r)})};this.search=function(e,t,n,r,i){e=e.toLowerCase();var s="searchObject";if(!t)return;o._frq(e,null,null,t,s,r,i,function(){o._fcr(e,s,n)})};this._fsn=function(e,t){var n="",r="",i="",s="",u,a,f,l,c;if(!e)return;if(!t)t={};a=new Array;for(u in t)a.push(u);a.sort();for(f=0;f<a.length;f++){u=o._fru(a[f]);l=o._fru(t[a[f]]);if(n)n+="&";n+=u+"="+l}r="GET&"+o._fru(e.toLowerCase())+"&"+o._fru(n);i=o._fru(o.consumer_secret)+"&"+o._fru(o.token_secret);c=CryptoJS.HmacSHA1(r,i);s=c.toString(CryptoJS.enc.Base64);return s};this._frq=function(e,t,n,r,i,s,u,a){if(!e&&i!=="getConnector"||i==="searchObject"&&!r||!i)return;if(!o.token||!o.token_secret){o.getToken(function(){o._frqs(e,t,n,r,i,s,u,a)})}else{o._frqs(e,t,n,r,i,s,u,a)}};this._frqs=function(e,t,n,r,i,s,u,a){var f,l,c,h;f=o._bu+"/"+e;if(t)f+="/"+t;if(i==="searchObject"){f+="/search"}if(i==="getConnector")f=f+"/"+n;f+=".json";l={oauth_token:o.token,_callback:"var json="};if(s){if(!r["page"])r["page"]=s}if(u){if(!r["pageCount"])r["pageCount"]=u}for(c in r)l[c]=r[c];h=o._fsn(f,l);f+="?oauth_signature="+encodeURIComponent(h);for(c in l)f+="&"+encodeURIComponent(c)+"="+encodeURIComponent(l[c]);o._fl(f,{},a)};this.getToken=function(e){o.token="";o.token_secret="";var t,n;if(!o.consumer_key)return;t=o._bu+"/";if(o._v)t+=o._v+"/";t+="oauth/request_token.json";n=o._fsn(t,{oauth_consumer_key:o.consumer_key,_callback:"var json="});o._fl(t,{data:{oauth_consumer_key:o.consumer_key,oauth_signature:n,_callback:"var json="},async:false},function(){o.token=o._rs.data.token;o.token_secret=o._rs.data.token_secret;e()})};this.setToken=function(e,t){if(e)o.token=e;if(t)o._token_secret=t};this._fcr=function(e,t,n,r){o._fch(function(){return typeof o._rs!=="undefined"&&o._rs!==null},function(){var i=[];var s={ConsumerKey:o.consumer_key,ConsumerSecret:o.consumer_secret,AccessToken:o.token,TokenSecret:o.token_secret};if(t==="getConnector"||t==="searchObject"){if(o._rs.data){var u=o._rs.count;var f=o._rs.currentPage;var l=o._rs.pageCount;var h=o._rs.data;h.forEach(function(t){i.push(new MusicStoryObject(t,e,s))});var p=new MusicStoryObjects(i,l,u,f);if(typeof n!=="undefined")n(p,r)}else if(typeof n!=="undefined")n([],r)}else{var p=new MusicStoryObject(o._rs,e,s);if(typeof n!=="undefined")n(p,r)}})}}function MusicStoryObject(e,t,n){MusicStoryApi.call(this);for(var r in e){this[r]=e[r]}var i=this;this.object_name=t;this.token=n["AccessToken"];this.token_secret=n["TokenSecret"];this.consumer_key=n["ConsumerKey"];this.consumer_secret=n["ConsumerSecret"];this.getConnector=function(e,t,n,r,s){var u="getConnector";e=e.toLowerCase();var a=this.object_name;if(!t)t={};this._frq(a,i.id,e,t,u,n,r,function(){if(e==="biographies")e="biography";else e=e.substr(0,e.length-1);i._fcr(e,u,s,i)})}}function MusicStoryObjects(e,t,n,r){this._p=0;this._pc=t;this._c=n;this._cp=r;this.data=e;this.size=function(){return this._c};this.hasNextPage=function(){return this._cp<this._pc};this.hasPrevPage=function(){return this._cp>1};this.rewind=function(){this._p=0};this.current=function(){if(this.data[this._p]){return this.data[this._p]}else{return null}};this.key=function(){return this._p};this.next=function(){++this._p;return this.current()};this.prev=function(){--this._p;return this.current()};this.valid=function(){if(this.data){return true}else{return false}};this.hasNext=function(){if(this.data[this._p+1]){return true}else{return false}};this.hasPrev=function(){if(this.data[this._p-1]){return true}else{return false}}}function init_crypto(){CryptoJS=CryptoJS||function(e,t){var n={},r=n.lib={},i=function(){},s=r.Base={extend:function(e){i.prototype=this;var t=new i;e&&t.mixIn(e);t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)});t.init.prototype=t;t.$super=this;return t},create:function(){var e=this.extend();e.init.apply(e,arguments);return e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=s.extend({init:function(e,n){e=this.words=e||[];this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;e=e.sigBytes;this.clamp();if(r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);this.sigBytes+=e;return this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4);t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);e.words=this.words.slice(0);return e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),u=n.enc={},a=u.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16));n.push((i&15).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new o.init(n,t/2)}},f=u.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(e.charCodeAt(r)&255)<<24-8*(r%4);return new o.init(n,t)}},l=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},c=r.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new o.init;this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e));this._data.concat(e);this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,u=i/(4*s),u=t?e.ceil(u):e.max((u|0)-this._minBufferSize,0);t=u*s;i=e.min(4*t,i);if(t){for(var a=0;a<t;a+=s)this._doProcessBlock(r,a);a=r.splice(0,t);n.sigBytes-=i}return new o.init(a,i)},clone:function(){var e=s.clone.call(this);e._data=this._data.clone();return e},_minBufferSize:0});r.Hasher=c.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e);this.reset()},reset:function(){c.reset.call(this);this._doReset()},update:function(e){this._append(e);this._process();return this},finalize:function(e){e&&this._append(e);return this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return(new e.init(n)).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return(new h.HMAC.init(e,n)).finalize(t)}}});var h=n.algo={};return n}(Math);(function(){var e=CryptoJS,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,n){e=this._hasher=new e.init;"string"==typeof n&&(n=t.parse(n));var r=e.blockSize,i=4*r;n.sigBytes>i&&(n=e.finalize(n));n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),u=s.words,a=o.words,f=0;f<r;f++)u[f]^=1549556828,a[f]^=909522486;s.sigBytes=o.sigBytes=i;this.reset()},reset:function(){var e=this._hasher;e.reset();e.update(this._iKey)},update:function(e){this._hasher.update(e);return this},finalize:function(e){var t=this._hasher;e=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(e))}})})();(function(){var e=CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp();e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],s=0,o=0;o<n;o++)if(o%4){var u=r.indexOf(e.charAt(o-1))<<2*(o%4),a=r.indexOf(e.charAt(o))>>>6-2*(o%4);i[s>>>2]|=(u|a)<<24-8*(s%4);s++}return t.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var e=CryptoJS,t=e.lib,n=t.WordArray,r=t.Hasher,i=[],t=e.algo.SHA1=r.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],s=n[1],o=n[2],u=n[3],a=n[4],f=0;80>f;f++){if(16>f)i[f]=e[t+f]|0;else{var l=i[f-3]^i[f-8]^i[f-14]^i[f-16];i[f]=l<<1|l>>>31}l=(r<<5|r>>>27)+a+i[f];l=20>f?l+((s&o|~s&u)+1518500249):40>f?l+((s^o^u)+1859775393):60>f?l+((s&o|s&u|o&u)-1894007588):l+((s^o^u)-899497514);a=u;u=o;o=s<<30|s>>>2;s=r;r=l}n[0]=n[0]+r|0;n[1]=n[1]+s|0;n[2]=n[2]+o|0;n[3]=n[3]+u|0;n[4]=n[4]+a|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;t[r>>>5]|=128<<24-r%32;t[(r+64>>>9<<4)+14]=Math.floor(n/4294967296);t[(r+64>>>9<<4)+15]=n;e.sigBytes=4*t.length;this._process();return this._hash},clone:function(){var e=r.clone.call(this);e._hash=this._hash.clone();return e}});e.SHA1=r._createHelper(t);e.HmacSHA1=r._createHmacHelper(t)})()}var CryptoJS;init_crypto()